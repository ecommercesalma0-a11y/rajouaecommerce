<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WhatsApp Group Button Component</title>
  <style>
    /* Mobile-first base styles */
    :root{
      --wa-green:#25D366;
      --wa-dark:#128C7E;
      --bg:#ffffff;
      --surface:#f7f7f8;
      --text:#111217;
      --radius:12px;
      --shadow: 0 6px 18px rgba(16,24,40,0.06);
      --gap:1rem;
      --max-width:420px;
    }

    /* Bias toward a neutral reset for the component demo page */
    html,body{height:100%;}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#fbfdff,#f6f9ff);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:2rem;
    }

    /* Demo container */
    .demo-card{
      width:100%;
      max-width:var(--max-width);
      background:var(--bg);
      border-radius:calc(var(--radius) + 4px);
      box-shadow:var(--shadow);
      padding:1.25rem;
      display:flex;
      gap:var(--gap);
      flex-direction:column;
      align-items:stretch;
    }

    /* Headline style */
    .headline{
      font-size:1.125rem;
      line-height:1.25;
      font-weight:600;
      margin:0 0 0.5rem 0;
      color:var(--text);
    }
    .subtle{
      font-size:0.95rem;
      color:#4b5563;
      margin:0 0 0.75rem 0;
    }

    /* Slot area for the web component to live in */
    whatsapp-join{
      display:block;
      width:100%;
    }

    /* Small helper text */
    .footnote{font-size:0.82rem;color:#6b7280;margin-top:0.5rem}

    /* Large screens layout tweak */
    @media(min-width:720px){
      body{padding:3rem}
      .demo-card{padding:1.5rem}
      .headline{font-size:1.25rem}
    }
  </style>
</head>
<body>
  <main class="demo-card" aria-labelledby="wa-title">
    <h1 id="wa-title" class="headline">Join our WhatsApp group</h1>
    <p class="subtle">Tap the button below to open the group in WhatsApp. Works on mobile and desktop (WhatsApp Web).</p>

    <!-- Web component usage -->
    <whatsapp-join
      group-url="https://chat.whatsapp.com/Hyqgqz3nEg89SwbJ8EIoWq?mode=wwt"
      label="Join WhatsApp group"
    ></whatsapp-join>

    <p class="footnote">By clicking the button you will be redirected to WhatsApp. Make sure you trust the group link before joining.</p>
  </main>

  <script>
    /*
      whatsapp-join
      - A lightweight web component that renders a headline (if provided) and a single WhatsApp-styled button.
      - Mobile-first, accessible, uses Shadow DOM to encapsulate styles.
      - Attributes:
        * group-url (required) - the full WhatsApp group link
        * label (optional) - accessible label/text on the button
    */

    class WhatsAppJoin extends HTMLElement {
      constructor(){
        super();
        this.attachShadow({mode:'open'});
      }

      connectedCallback(){
        const groupUrl = this.getAttribute('group-url') || '#';
        const label = this.getAttribute('label') || 'Join on WhatsApp';

        // Template
        this.shadowRoot.innerHTML = `
          <style>
            :host{display:block}
            .wrap{display:flex;gap:0.75rem;flex-direction:column;align-items:stretch}

            /* Button styles - mobile-first */
            .wa-button{
              display:inline-flex;
              align-items:center;
              justify-content:center;
              gap:0.6rem;
              padding:0.875rem 1rem;
              border-radius:10px;
              border:0;
              background:linear-gradient(180deg,var(--wa-green,#25D366),var(--wa-dark,#128C7E));
              color:white;
              font-weight:600;
              font-size:1rem;
              line-height:1;
              box-shadow: 0 8px 18px rgba(37,211,102,0.15);
              cursor:pointer;
              text-decoration:none;
              transition:transform 160ms ease, box-shadow 160ms ease, opacity 160ms ease;
              -webkit-tap-highlight-color: rgba(0,0,0,0);
            }
            .wa-button:active{transform:translateY(1px)}
            .wa-button:focus{outline:3px solid rgba(37,211,102,0.18);outline-offset:3px}
            .wa-button[aria-disabled="true"]{opacity:0.6;cursor:not-allowed}

            /* Icon wrapper — keeps icon square and centered */
            .icon{
              width:1.3rem;
              height:1.3rem;
              display:inline-flex;
              align-items:center;
              justify-content:center;
              flex:0 0 1.3rem;
            }

            /* Text block to allow wrapping at smaller sizes */
            .txt{white-space:nowrap}

            /* Larger screens: make button slightly bigger */
            @media(min-width:720px){
              .wa-button{padding:1rem 1.25rem;font-size:1.05rem}
            }
          </style>

          <div class="wrap">
            <a class="wa-button" role="button" aria-label="${this._escapeAttr(label)}" href="${this._escapeAttr(groupUrl)}" target="_blank" rel="noopener noreferrer">
              <span class="icon" aria-hidden="true">
                <!-- Embedded WhatsApp SVG mark (brandmark) -->
                <svg viewBox="0 0 24 24" width="20" height="20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                  <path fill="#FFFFFF" d="M20.52 3.48A11.88 11.88 0 0012.01.5C6.07.5 1.3 5.27 1.3 11.21c0 1.97.52 3.86 1.52 5.54L.2 23.5l6.99-2.07a11.67 11.67 0 005.84 1.27h.01c5.94 0 10.71-4.77 10.71-10.71 0-2.86-1.12-5.53-3.24-7.51zM12.01 21.5h-.01a10.07 10.07 0 01-5.14-1.36l-.37-.22-4.14 1.22 1.25-3.78-.24-.38a9.83 9.83 0 01-1.52-5.24c0-5.45 4.43-9.88 9.88-9.88 2.64 0 5.12 1.03 6.99 2.9 1.88 1.87 2.91 4.43 2.91 7.13 0 5.45-4.44 9.88-9.88 9.88z"/>
                  <path fill="#FFFFFF" d="M17.07 14.08c-.3-.15-1.77-.87-2.04-.97-.27-.1-.47-.15-.67.15-.2.3-.77.97-.94 1.17-.17.2-.33.22-.61.07-.28-.15-1.18-.43-2.25-1.39-.83-.74-1.39-1.66-1.55-1.94-.16-.29-.02-.45.12-.6.12-.12.28-.31.42-.47.14-.16.19-.27.28-.45.09-.18.04-.33-.02-.47-.06-.14-.67-1.62-.92-2.23-.24-.58-.49-.5-.67-.51-.17-.01-.37-.01-.57-.01-.19 0-.5.07-.76.33-.26.26-1.01.99-1.01 2.42 0 1.43 1.03 2.81 1.17 3.01.14.2 2.02 3.08 4.9 4.31 2.88 1.23 2.88.82 3.4.77.52-.05 1.77-.72 2.02-1.41.25-.69.25-1.28.17-1.41-.08-.13-.28-.2-.59-.35z"/>
                </svg>
              </span>
              <span class="txt">${this._escapeAttr(label)}</span>
            </a>
          </div>
        `;

        // Progressive enhancement: add click handler to open link in new tab on older browsers where target may be blocked
        const anchor = this.shadowRoot.querySelector('.wa-button');
        anchor.addEventListener('click', (e)=>{
          // nothing special — anchor handles navigation. Could be used for analytics hooks.
        });
      }

      _escapeAttr(s){
        // Basic escaping for attributes to guard against injection in this simple component.
        return (''+s).replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
      }
    }

    // Define the custom element (if not already defined)
    if(!customElements.get('whatsapp-join')){
      customElements.define('whatsapp-join', WhatsAppJoin);
    }
  </script>
</body>
</html>
